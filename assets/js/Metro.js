import * as ApiServices from '../dashboardAPI.js'

let isUnclusteredPointClickEventDeclared = false;
const LoadMetrosLayer = async (metros) => {

    LoadTramGreenAndRedLine();
    if (!mapbox.getSource('metros'))
        mapbox.addSource('metros', {
            type: 'geojson',
            data: metros,
            cluster: false,
            //clusterMaxZoom: 14, // Max zoom to cluster points on
            //clusterRadius: 60 // Radius of each cluster when clustering points (defaults to 50)
        });
    //mapbox.addLayer({
    //    id: 'metro-clusters',
    //    type: 'circle',
    //    source: 'metros',
    //    filter: ['has', 'point_count'],
    //    paint: {
    //        'circle-color': [
    //            'match',
    //            ['get', 'color'], // Use the result 'nation' property
    //            'Red', '#ff0000',
    //            'Orange', '#FF7D00',
    //            'Green', '#00FF00',
    //            '#ff5338' // any other nation
    //        ],
    //        'circle-radius': 12
    //    }
    //});

    //mapbox.addLayer({
    //    id: 'cluster-metro-count',
    //    type: 'symbol',
    //    source: 'metros',
    //    filter: ['has', 'point_count'],
    //    layout: {
    //        'text-field': '{point_count_abbreviated}',
    //        'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],
    //        'text-size': 10
    //    }
    //});
    mapbox.addLayer({
        id: 'unclustered-metro-point',
        type: 'circle',
        source: 'metros',
        filter: ['!', ['has', 'point_count']],
        paint: {
            'circle-color': [
                'match',
                ['get', 'color'], // Use the result 'nation' property
                'Red', '#AA0020',
                'Orange', '#c96200',
                'Green', '#198754',
                '#ff5338' // any other nation
            ],
            'circle-radius': 7,
            'circle-stroke-width': 1,
            'circle-stroke-color': [
                'match',
                ['get', 'color'], // Use the result 'nation' property
                'Red', '#fff', //ff0000
                'Orange', '#fff', //#FF7D00 '',
                'Green', '#fff', //ff0000'#',
                '#fff' // any other nation
            ],
        }
    });

    
    //mapbox.on('click', 'metro-clusters', (e) => {
    //    const features = mapbox.queryRenderedFeatures(e.point, {
    //        layers: ['metro-clusters']
    //    });
    //    const clusterId = features[0].properties.cluster_id;
    //    mapbox.getSource('metros').getClusterExpansionZoom(
    //        clusterId,
    //        (err, zoom) => {
    //            if (err) return;

    //            mapbox.easeTo({
    //                center: features[0].geometry.coordinates,
    //                zoom: zoom
    //            });
    //        }
    //    );
    //});

    // When a click event occurs on a feature in
    // the unclustered-point layer, open a popup at
    // the location of the feature, with
    // description HTML from its properties.
    if (!isUnclusteredPointClickEventDeclared) {
        mapbox.on('click', 'unclustered-metro-point', (e) => {
            const coordinates = e.features[0].geometry.coordinates.slice();
            const name = e.features[0].properties.name;

            new mapboxgl.Popup()
                .setLngLat(coordinates)
                .setHTML(`<div class="fl-map-tooltip">
                        ${name}
                    </div>`)
                .addTo(mapbox);
        });
        isUnclusteredPointClickEventDeclared = true;
    }

    mapbox.on('mouseenter', 'unclustered-metro-point', () => {
        mapbox.getCanvas().style.cursor = 'pointer';
    });
    mapbox.on('mouseleave', 'unclustered-metro-point', () => {
        mapbox.getCanvas().style.cursor = '';
    });

}


const LoadTramGreenAndRedLine = async () => {
    var metroTramRedLineData = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "geometry": {
                    "bbox": [
                        54.9517737696354,
                        24.90656953325048,
                        55.39618362830887,
                        25.266680215085067
                    ],
                    "type": "LineString",
                    "coordinates": [
                        [
                            55.39616461561277,
                            25.229719043012935
                        ],
                        [
                            55.394483917327626,
                            25.229397307200156
                        ],
                        [
                            55.393696167655335,
                            25.22939763106737
                        ],
                        [
                            55.39209466248132,
                            25.229923735702883
                        ],
                        [
                            55.38988930732058,
                            25.230688900348166
                        ],
                        [
                            55.38743471987814,
                            25.232027351535155
                        ],
                        [
                            55.38077930977015,
                            25.235170449723313
                        ],
                        [
                            55.38020167253042,
                            25.23536171001525
                        ],
                        [
                            55.379413902248324,
                            25.23540972678229
                        ],
                        [
                            55.37879677896396,
                            25.235350206727833
                        ],
                        [
                            55.37804836703845,
                            25.235314608377116
                        ],
                        [
                            55.377418171087406,
                            25.235410335717965
                        ],
                        [
                            55.377011185366825,
                            25.235517936801617
                        ],
                        [
                            55.37183879520342,
                            25.237931708660092
                        ],
                        [
                            55.36776904498153,
                            25.23997483651766
                        ],
                        [
                            55.36666626895601,
                            25.24059608588188
                        ],
                        [
                            55.36468382827019,
                            25.241551898917113
                        ],
                        [
                            55.36415868469168,
                            25.241850565353044
                        ],
                        [
                            55.363948629533134,
                            25.24198197363796
                        ],
                        [
                            55.36272778719417,
                            25.243212271875954
                        ],
                        [
                            55.35620253525239,
                            25.246855806981117
                        ],
                        [
                            55.35583489023923,
                            25.246987227965587
                        ],
                        [
                            55.354456195290254,
                            25.247369582881937
                        ],
                        [
                            55.35046464440833,
                            25.249531642832444
                        ],
                        [
                            55.349926282538355,
                            25.249698895446446
                        ],
                        [
                            55.349387909775835,
                            25.249794492748062
                        ],
                        [
                            55.3489151777855,
                            25.24977065892891
                        ],
                        [
                            55.3482454844088,
                            25.249818496963055
                        ],
                        [
                            55.3468667297439,
                            25.250164954246284
                        ],
                        [
                            55.34624956911933,
                            25.250308316198154
                        ],
                        [
                            55.34555360532073,
                            25.25032031764738
                        ],
                        [
                            55.34480510113358,
                            25.250177070993836
                        ],
                        [
                            55.34416164449168,
                            25.24997410175652
                        ],
                        [
                            55.34342627245923,
                            25.249795020469378
                        ],
                        [
                            55.3423494912496,
                            25.249663725652905
                        ],
                        [
                            55.34133836979347,
                            25.24954436166441
                        ],
                        [
                            55.33927674759694,
                            25.249484747888303
                        ],
                        [
                            55.33851512963577,
                            25.249460892121974
                        ],
                        [
                            55.33768785195782,
                            25.24934149657335
                        ],
                        [
                            55.33686057451701,
                            25.249174327484972
                        ],
                        [
                            55.336204007603804,
                            25.249078803896886
                        ],
                        [
                            55.33545552446698,
                            25.24907881654808
                        ],
                        [
                            55.334588861377355,
                            25.249234075396696
                        ],
                        [
                            55.33162117406369,
                            25.250201391045323
                        ],
                        [
                            55.33103025548977,
                            25.250487996391712
                        ],
                        [
                            55.33075449107738,
                            25.250691009637325
                        ],
                        [
                            55.33050498732221,
                            25.250953733983554
                        ],
                        [
                            55.33024235007424,
                            25.251252284292597
                        ],
                        [
                            55.329927176688436,
                            25.251861330689845
                        ],
                        [
                            55.32979584288102,
                            25.252482323102686
                        ],
                        [
                            55.32976957087189,
                            25.252780877981426
                        ],
                        [
                            55.32982208317682,
                            25.25328245246958
                        ],
                        [
                            55.330399818418805,
                            25.255826157363106
                        ],
                        [
                            55.33041293843271,
                            25.256327730646806
                        ],
                        [
                            55.33041292500979,
                            25.256889014704022
                        ],
                        [
                            55.33032098777723,
                            25.257390585808533
                        ],
                        [
                            55.33018964971517,
                            25.258023520317938
                        ],
                        [
                            55.33003205115423,
                            25.258453436487137
                        ],
                        [
                            55.32980878738395,
                            25.25896694638182
                        ],
                        [
                            55.329532991757866,
                            25.25949239676962
                        ],
                        [
                            55.32908646804858,
                            25.26012532166812
                        ],
                        [
                            55.32877127580809,
                            25.26047163629798
                        ],
                        [
                            55.32853488080631,
                            25.26072241516252
                        ],
                        [
                            55.32798329444856,
                            25.26117620006985
                        ],
                        [
                            55.32749737172074,
                            25.261534447850906
                        ],
                        [
                            55.32639419614622,
                            25.262155394808566
                        ],
                        [
                            55.31969615522577,
                            25.265462918057082
                        ],
                        [
                            55.318842450615335,
                            25.26594052468886
                        ],
                        [
                            55.31847469921425,
                            25.266143505506548
                        ],
                        [
                            55.318133209895514,
                            25.26637037250444
                        ],
                        [
                            55.3176603922416,
                            25.26656139822761
                        ],
                        [
                            55.31704311606143,
                            25.266692695573767
                        ],
                        [
                            55.31664912075654,
                            25.266692651570246
                        ],
                        [
                            55.31629452831699,
                            25.26666872667365
                        ],
                        [
                            55.31268304485365,
                            25.265844253998434
                        ],
                        [
                            55.3123416113359,
                            25.26568895726015
                        ],
                        [
                            55.312000182861496,
                            25.265509775331967
                        ],
                        [
                            55.31171129808597,
                            25.2652708893184
                        ],
                        [
                            55.31143555600795,
                            25.264984235883006
                        ],
                        [
                            55.31064774512014,
                            25.264076509680716
                        ],
                        [
                            55.31007005021976,
                            25.26327629225092
                        ],
                        [
                            55.30992567175545,
                            25.262846350125137
                        ],
                        [
                            55.30972878191368,
                            25.2623208618153
                        ],
                        [
                            55.309531891436926,
                            25.261807315411282
                        ],
                        [
                            55.30895427657722,
                            25.260696596025127
                        ],
                        [
                            55.30857354699699,
                            25.260135248934418
                        ],
                        [
                            55.30806150917169,
                            25.259514167362756
                        ],
                        [
                            55.30659102780531,
                            25.257925594459394
                        ],
                        [
                            55.30559321684628,
                            25.256874495735627
                        ],
                        [
                            55.305317521785405,
                            25.256528119510982
                        ],
                        [
                            55.30508122442351,
                            25.256181750299397
                        ],
                        [
                            55.30473990868784,
                            25.25568011160911
                        ],
                        [
                            55.30442486810984,
                            25.25514265059771
                        ],
                        [
                            55.303256620132366,
                            25.25313612483141
                        ],
                        [
                            55.30260031672436,
                            25.25201342108316
                        ],
                        [
                            55.301340243348136,
                            25.249875495754715
                        ],
                        [
                            55.2989908601088,
                            25.245850437727935
                        ],
                        [
                            55.297402814333225,
                            25.243139173289592
                        ],
                        [
                            55.29689097216266,
                            25.242291149227842
                        ],
                        [
                            55.29635292676613,
                            25.241275925425597
                        ],
                        [
                            55.295919951241856,
                            25.240201014984027
                        ],
                        [
                            55.29561815275581,
                            25.23955605731877
                        ],
                        [
                            55.29430584020463,
                            25.237322517295777
                        ],
                        [
                            55.2907628984441,
                            25.231111569935212
                        ],
                        [
                            55.29025116103197,
                            25.23023963710312
                        ],
                        [
                            55.28991000398074,
                            25.229666309014835
                        ],
                        [
                            55.289542523427926,
                            25.22928404839737
                        ],
                        [
                            55.28921438941568,
                            25.229021221164746
                        ],
                        [
                            55.28878124145177,
                            25.228710592547415
                        ],
                        [
                            55.2882955442696,
                            25.22849548470186
                        ],
                        [
                            55.2877311012545,
                            25.228208697433274
                        ],
                        [
                            55.287429218591825,
                            25.22798170107749
                        ],
                        [
                            55.286982977031634,
                            25.22759940953717
                        ],
                        [
                            55.28652370076272,
                            25.226978267321808
                        ],
                        [
                            55.2856183375808,
                            25.22561656011365
                        ],
                        [
                            55.2827973275455,
                            25.22156719481723
                        ],
                        [
                            55.27874331935546,
                            25.215642386306577
                        ],
                        [
                            55.27442735789553,
                            25.209311320540667
                        ],
                        [
                            55.272997585802514,
                            25.207137247635213
                        ],
                        [
                            55.27269594220045,
                            25.20658777890628
                        ],
                        [
                            55.27243367532392,
                            25.206050268037934
                        ],
                        [
                            55.27226327905746,
                            25.20554862151332
                        ],
                        [
                            55.27211913130719,
                            25.205058927920827
                        ],
                        [
                            55.27193567709725,
                            25.204425910317703
                        ],
                        [
                            55.271725863763415,
                            25.204007842762717
                        ],
                        [
                            55.27150290134017,
                            25.203637538572405
                        ],
                        [
                            55.271148713093666,
                            25.203195525135857
                        ],
                        [
                            55.27082071902261,
                            25.20287294486642
                        ],
                        [
                            55.26870863065785,
                            25.200507462049845
                        ],
                        [
                            55.26821020244863,
                            25.19982653231204
                        ],
                        [
                            55.26776423227076,
                            25.199241162519012
                        ],
                        [
                            55.26742321538816,
                            25.19876331886927
                        ],
                        [
                            55.266977278726955,
                            25.19813017743299
                        ],
                        [
                            55.26663626149854,
                            25.1976642742108
                        ],
                        [
                            55.266242698239054,
                            25.197281942485944
                        ],
                        [
                            55.2656129545818,
                            25.196756194094856
                        ],
                        [
                            55.26524559554556,
                            25.19646941012107
                        ],
                        [
                            55.25616883288283,
                            25.186672257640073
                        ],
                        [
                            55.25304733657043,
                            25.183386458219744
                        ],
                        [
                            55.24554616040276,
                            25.17517781759001
                        ],
                        [
                            55.23621031993287,
                            25.165104591095886
                        ],
                        [
                            55.23255244893202,
                            25.16116116982967
                        ],
                        [
                            55.23166100568874,
                            25.16014546007051
                        ],
                        [
                            55.2308220936058,
                            25.159093954139173
                        ],
                        [
                            55.23014058356052,
                            25.15812614963571
                        ],
                        [
                            55.229419709920876,
                            25.15717025664163
                        ],
                        [
                            55.228201066952536,
                            25.155246676024166
                        ],
                        [
                            55.224558561528404,
                            25.14939228483939
                        ],
                        [
                            55.22158460677038,
                            25.144541466185853
                        ],
                        [
                            55.21887283180029,
                            25.140168483543242
                        ],
                        [
                            55.217981990527214,
                            25.138794418084107
                        ],
                        [
                            55.2175889365905,
                            25.13823281927754
                        ],
                        [
                            55.213934251426906,
                            25.132449801030447
                        ],
                        [
                            55.21330539148667,
                            25.131589440350144
                        ],
                        [
                            55.21203434362643,
                            25.13010754787677
                        ],
                        [
                            55.21074995776964,
                            25.1288764237234
                        ],
                        [
                            55.20974063612627,
                            25.128087386882466
                        ],
                        [
                            55.20802344394716,
                            25.126808107743894
                        ],
                        [
                            55.20558530598891,
                            25.125038550312375
                        ],
                        [
                            55.20473338861245,
                            25.124321269182715
                        ],
                        [
                            55.19938544596834,
                            25.120506904274475
                        ],
                        [
                            55.19793043287478,
                            25.119574074231355
                        ],
                        [
                            55.19461425861265,
                            25.11733777681076
                        ],
                        [
                            55.193867110604884,
                            25.116871321613683
                        ],
                        [
                            55.18848046619783,
                            25.113068467688027
                        ],
                        [
                            55.187379743334105,
                            25.112159764265446
                        ],
                        [
                            55.18620029499798,
                            25.11128680179403
                        ],
                        [
                            55.18165281039075,
                            25.1080935926328
                        ],
                        [
                            55.17888775055892,
                            25.106144123074984
                        ],
                        [
                            55.177865689602214,
                            25.105366797289843
                        ],
                        [
                            55.17578229005918,
                            25.103788197909747
                        ],
                        [
                            55.17345024628147,
                            25.10182714344523
                        ],
                        [
                            55.172637976913954,
                            25.101145546914267
                        ],
                        [
                            55.17198278702854,
                            25.10070296556295
                        ],
                        [
                            55.17139322552649,
                            25.100224625666847
                        ],
                        [
                            55.16674281275633,
                            25.09614710465977
                        ],
                        [
                            55.16484356333157,
                            25.094389420883367
                        ],
                        [
                            55.163900475137424,
                            25.09354043337762
                        ],
                        [
                            55.16345505779512,
                            25.093193593163445
                        ],
                        [
                            55.16189600872741,
                            25.092057267627702
                        ],
                        [
                            55.160834812640076,
                            25.091291721129462
                        ],
                        [
                            55.15993101762601,
                            25.09051440860711
                        ],
                        [
                            55.15944631356546,
                            25.090143625495706
                        ],
                        [
                            55.156446833470135,
                            25.08758439609783
                        ],
                        [
                            55.15225599756914,
                            25.083757756725053
                        ],
                        [
                            55.15094636170474,
                            25.082597734845653
                        ],
                        [
                            55.15010817073293,
                            25.081880155019515
                        ],
                        [
                            55.14908652921863,
                            25.08107874560265
                        ],
                        [
                            55.14815651342839,
                            25.08039686805453
                        ],
                        [
                            55.146859757497744,
                            25.07943984779362
                        ],
                        [
                            55.14629654908842,
                            25.07900921059194
                        ],
                        [
                            55.145838248370964,
                            25.078578703806045
                        ],
                        [
                            55.14514422859886,
                            25.07794487508675
                        ],
                        [
                            55.14447642331816,
                            25.077323018918797
                        ],
                        [
                            55.143861002336074,
                            25.07674899645027
                        ],
                        [
                            55.137368909405744,
                            25.069300411670273
                        ],
                        [
                            55.136910885494814,
                            25.068738510249865
                        ],
                        [
                            55.13620419927023,
                            25.067889658101986
                        ],
                        [
                            55.13564136846844,
                            25.067279843624913
                        ],
                        [
                            55.135013157825036,
                            25.066562457408804
                        ],
                        [
                            55.13277516331562,
                            25.064039588957183
                        ],
                        [
                            55.132513402344586,
                            25.063752615713486
                        ],
                        [
                            55.13174114031682,
                            25.062951423253743
                        ],
                        [
                            55.131269936841825,
                            25.06246114117221
                        ],
                        [
                            55.12877032989746,
                            25.059663178421058
                        ],
                        [
                            55.12693825890265,
                            25.057594593893192
                        ],
                        [
                            55.12633630927626,
                            25.056913034474942
                        ],
                        [
                            55.12574721535167,
                            25.05638674287967
                        ],
                        [
                            55.125498537102416,
                            25.056135602881774
                        ],
                        [
                            55.12526321236314,
                            25.055741171328815
                        ],
                        [
                            55.1250151823826,
                            25.055107871814837
                        ],
                        [
                            55.12484646372175,
                            25.05409252354052
                        ],
                        [
                            55.12454597779843,
                            25.053471091981955
                        ],
                        [
                            55.124179579038994,
                            25.053064531819214
                        ],
                        [
                            55.12372139104062,
                            25.05266978373084
                        ],
                        [
                            55.12327607189616,
                            25.05241836232067
                        ],
                        [
                            55.12271292658289,
                            25.052071232618054
                        ],
                        [
                            55.1221106178978,
                            25.0516285051594
                        ],
                        [
                            55.12177028874199,
                            25.05131751602967
                        ],
                        [
                            55.12141697447886,
                            25.050934852634708
                        ],
                        [
                            55.119938231469085,
                            25.049380211520777
                        ],
                        [
                            55.11899602569483,
                            25.048399570453302
                        ],
                        [
                            55.115437333527595,
                            25.044345886739233
                        ],
                        [
                            55.11384129399032,
                            25.042492449743754
                        ],
                        [
                            55.11343597664418,
                            25.04189472528763
                        ],
                        [
                            55.11318775771235,
                            25.04141665758116
                        ],
                        [
                            55.11275663504807,
                            25.040591985393107
                        ],
                        [
                            55.11246903063098,
                            25.04014968547597
                        ],
                        [
                            55.11211584140098,
                            25.03973117237393
                        ],
                        [
                            55.1116184581769,
                            25.039312443341885
                        ],
                        [
                            55.111134014921014,
                            25.038989272044667
                        ],
                        [
                            55.11045300856543,
                            25.038629976951615
                        ],
                        [
                            55.11013885389243,
                            25.038378712770932
                        ],
                        [
                            55.10964163446891,
                            25.037876379803368
                        ],
                        [
                            55.106057380099884,
                            25.033798545473147
                        ],
                        [
                            55.10494566186233,
                            25.032459279755095
                        ],
                        [
                            55.10443573393755,
                            25.031765829452862
                        ],
                        [
                            55.103729638032945,
                            25.03083322414121
                        ],
                        [
                            55.10310228843661,
                            25.02985296734596
                        ],
                        [
                            55.102461885810925,
                            25.02884880251875
                        ],
                        [
                            55.102017860323514,
                            25.027976308299376
                        ],
                        [
                            55.10154789534794,
                            25.026960461990935
                        ],
                        [
                            55.100803876722594,
                            25.025311231960085
                        ],
                        [
                            55.09998191269408,
                            25.02330359985227
                        ],
                        [
                            55.099433679815654,
                            25.02210848563429
                        ],
                        [
                            55.099081968754085,
                            25.020961449151788
                        ],
                        [
                            55.098640583601664,
                            25.018727499785253
                        ],
                        [
                            55.09814801727853,
                            25.0158485706191
                        ],
                        [
                            55.09791422242024,
                            25.014737544646074
                        ],
                        [
                            55.097487787552105,
                            25.01156015303305
                        ],
                        [
                            55.09716274626189,
                            25.010198187138457
                        ],
                        [
                            55.09665782789878,
                            25.006960954016424
                        ],
                        [
                            55.09560831787676,
                            25.00071332411451
                        ],
                        [
                            55.09467583233708,
                            24.99499134296862
                        ],
                        [
                            55.09433808349984,
                            24.993462151933958
                        ],
                        [
                            55.09407917321931,
                            24.991825603495165
                        ],
                        [
                            55.09362568519979,
                            24.98917362198621
                        ],
                        [
                            55.09301767129354,
                            24.98513604928907
                        ],
                        [
                            55.09269358301399,
                            24.983344137947142
                        ],
                        [
                            55.09230387443432,
                            24.9816118322199
                        ],
                        [
                            55.09208276085495,
                            24.98077549276284
                        ],
                        [
                            55.09191380353093,
                            24.98007060600115
                        ],
                        [
                            55.091862093287425,
                            24.97971224439317
                        ],
                        [
                            55.09156246538944,
                            24.978828006232696
                        ],
                        [
                            55.09117124302636,
                            24.97788390544507
                        ],
                        [
                            55.09079317554368,
                            24.97691593978811
                        ],
                        [
                            55.090558556330926,
                            24.976294542377662
                        ],
                        [
                            55.09029773547105,
                            24.97567310178683
                        ],
                        [
                            55.089879929181116,
                            24.974931978087984
                        ],
                        [
                            55.08951434687501,
                            24.97428647950031
                        ],
                        [
                            55.08798650037278,
                            24.97172825309547
                        ],
                        [
                            55.08630204957764,
                            24.968895070859663
                        ],
                        [
                            55.0836907835327,
                            24.964436123162155
                        ],
                        [
                            55.08139292111094,
                            24.9605628468353
                        ],
                        [
                            55.08073958373057,
                            24.959737699699733
                        ],
                        [
                            55.07676610531027,
                            24.955383794956212
                        ],
                        [
                            55.072309538538214,
                            24.950407921234326
                        ],
                        [
                            55.07181272367712,
                            24.94995323013632
                        ],
                        [
                            55.071355159534434,
                            24.949522491656992
                        ],
                        [
                            55.0708320015325,
                            24.949139406722207
                        ],
                        [
                            55.07020407918646,
                            24.94874419233398
                        ],
                        [
                            55.06960220641934,
                            24.94842067718688
                        ],
                        [
                            55.068974113221216,
                            24.948109055721165
                        ],
                        [
                            55.0683851158584,
                            24.94789304216975
                        ],
                        [
                            55.067364135585194,
                            24.947544886871395
                        ],
                        [
                            55.057953056471476,
                            24.94433910896613
                        ],
                        [
                            55.04725983026214,
                            24.9407003482203
                        ],
                        [
                            55.036698103454675,
                            24.93710885505898
                        ],
                        [
                            55.01840304764645,
                            24.930885043652765
                        ],
                        [
                            54.999285578037096,
                            24.924358589960146
                        ],
                        [
                            54.98235561594585,
                            24.918372277849485
                        ],
                        [
                            54.97504245013166,
                            24.915799167464556
                        ],
                        [
                            54.972020099519796,
                            24.91486035204173
                        ],
                        [
                            54.964523319096855,
                            24.912525135523225
                        ],
                        [
                            54.95393136964046,
                            24.90755433022996
                        ],
                        [
                            54.9517737696354,
                            24.90656953325048
                        ]
                    ]
                },
                "properties": {
                    "Segment": "",
                    "X": null,
                    "Y": null,
                    "Length": null,
                    "Units": "",
                    "Area": "",
                    "Area_Units": "",
                    "Angle": null,
                    "Bearing": ""
                }
            },
            {
                "type": "Feature",
                "geometry": {
                    "bbox": [
                        55.1256589341971,
                        24.960846116640877,
                        55.16364768378667,
                        25.05817848558496
                    ],
                    "type": "LineString",
                    "coordinates": [
                        [
                            55.143789971381835,
                            24.96087029489141
                        ],
                        [
                            55.145307503119085,
                            24.96226950821017
                        ],
                        [
                            55.14683669414053,
                            24.964648017366866
                        ],
                        [
                            55.14717584361316,
                            24.96562773839965
                        ],
                        [
                            55.147214014894146,
                            24.966380172506312
                        ],
                        [
                            55.14676040315252,
                            24.97180156161478
                        ],
                        [
                            55.14616777621367,
                            24.97381912224231
                        ],
                        [
                            55.14553580543115,
                            24.975848572874327
                        ],
                        [
                            55.14549570124365,
                            24.976373997743472
                        ],
                        [
                            55.14552101686123,
                            24.976959218227634
                        ],
                        [
                            55.145703287757854,
                            24.977723775904135
                        ],
                        [
                            55.1459644462947,
                            24.97830929329535
                        ],
                        [
                            55.146500450538845,
                            24.979098179952917
                        ],
                        [
                            55.148448244626564,
                            24.98208626652571
                        ],
                        [
                            55.148696393814326,
                            24.982623992260734
                        ],
                        [
                            55.14902253907229,
                            24.983579805653047
                        ],
                        [
                            55.15006528144227,
                            24.987283302774507
                        ],
                        [
                            55.150391608412306,
                            24.98813162943213
                        ],
                        [
                            55.150861972017985,
                            24.989051787617754
                        ],
                        [
                            55.15176370740076,
                            24.990689027450703
                        ],
                        [
                            55.1526393462469,
                            24.992266516869986
                        ],
                        [
                            55.15304450140808,
                            24.99299550698262
                        ],
                        [
                            55.15350188599739,
                            24.99385592766874
                        ],
                        [
                            55.15380237517044,
                            24.99447730568238
                        ],
                        [
                            55.154037225545885,
                            24.995182202148122
                        ],
                        [
                            55.15420621141566,
                            24.99612587082681
                        ],
                        [
                            55.154839691659795,
                            25.002097927852954
                        ],
                        [
                            55.155882538114966,
                            25.005956630132104
                        ],
                        [
                            55.156456621126544,
                            25.00773675829396
                        ],
                        [
                            55.15679628725341,
                            25.008489544249006
                        ],
                        [
                            55.15714926754805,
                            25.009099034228488
                        ],
                        [
                            55.1575415852766,
                            25.009696627262237
                        ],
                        [
                            55.1581433780208,
                            25.010449719606413
                        ],
                        [
                            55.161545934794916,
                            25.014000633076133
                        ],
                        [
                            55.161951610972096,
                            25.014442976265176
                        ],
                        [
                            55.16218712456129,
                            25.01472986918226
                        ],
                        [
                            55.16247491538949,
                            25.01512430491679
                        ],
                        [
                            55.16269707764312,
                            25.015590320193464
                        ],
                        [
                            55.16297143618172,
                            25.016223590870794
                        ],
                        [
                            55.16325821293351,
                            25.01735846297481
                        ],
                        [
                            55.16360982180846,
                            25.019006938623754
                        ],
                        [
                            55.163700206183506,
                            25.01999827444246
                        ],
                        [
                            55.16364689264899,
                            25.0206431118972
                        ],
                        [
                            55.16340988481067,
                            25.021431050147097
                        ],
                        [
                            55.163081339162865,
                            25.022063629872473
                        ],
                        [
                            55.16260862924228,
                            25.02268410076244
                        ],
                        [
                            55.16210991574178,
                            25.023149286906587
                        ],
                        [
                            55.16112581793929,
                            25.023912473725943
                        ],
                        [
                            55.16027299814426,
                            25.024520553601683
                        ],
                        [
                            55.1518359355836,
                            25.030708672721765
                        ],
                        [
                            55.147571145700084,
                            25.03384429041867
                        ],
                        [
                            55.14606228741758,
                            25.034773914217144
                        ],
                        [
                            55.143018156805816,
                            25.036716679052102
                        ],
                        [
                            55.14245375151878,
                            25.037193656171702
                        ],
                        [
                            55.140733322257866,
                            25.03924555020264
                        ],
                        [
                            55.14009011258582,
                            25.039806013561044
                        ],
                        [
                            55.13129666658769,
                            25.0462193881323
                        ],
                        [
                            55.12869779175335,
                            25.048138574015233
                        ],
                        [
                            55.12839583153936,
                            25.048400892771138
                        ],
                        [
                            55.12788359623235,
                            25.04897342522144
                        ],
                        [
                            55.12750245479968,
                            25.049546137539433
                        ],
                        [
                            55.12587106305067,
                            25.052971364058443
                        ],
                        [
                            55.12560773136575,
                            25.053639775527152
                        ],
                        [
                            55.125501902474944,
                            25.05420092451987
                        ],
                        [
                            55.125514227459504,
                            25.054666698847093
                        ],
                        [
                            55.125592185329886,
                            25.055084795006152
                        ],
                        [
                            55.12573569619901,
                            25.05550298274381
                        ],
                        [
                            55.1259186401542,
                            25.055861512962952
                        ],
                        [
                            55.126153947148644,
                            25.05626788594465
                        ],
                        [
                            55.12760645007725,
                            25.057929910570888
                        ],
                        [
                            55.12737011713289,
                            25.058132605239948
                        ]
                    ]
                },
                "properties": {
                    "Segment": "Total",
                    "X": 480859.502293246,
                    "Y": 2761733.0306473,
                    "Length": 13148.4162816554,
                    "Units": "m",
                    "Area": "",
                    "Area_Units": "",
                    "Angle": 0,
                    "Bearing": ""
                }
            }
        ],
        "fileName": "Polyline"
    };
    var metroTramGreenLineData = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "geometry": {
                    "bbox": [
                        55.28847355694547,
                        25.216392855256593,
                        55.40571602222732,
                        25.280081750686065
                    ],
                    "type": "LineString",
                    "coordinates": [
                        [
                            55.40569989908888,
                            25.252889387583746
                        ],
                        [
                            55.40459693531515,
                            25.25305711493668
                        ],
                        [
                            55.40378289386035,
                            25.253272465361395
                        ],
                        [
                            55.40292956316319,
                            25.253678905230544
                        ],
                        [
                            55.39985770509518,
                            25.25547165278599
                        ],
                        [
                            55.39611619488903,
                            25.257610946422652
                        ],
                        [
                            55.393923758656015,
                            25.2589016206979
                        ],
                        [
                            55.39219077436121,
                            25.259905466918333
                        ],
                        [
                            55.39087791304344,
                            25.260718054305126
                        ],
                        [
                            55.383735503454744,
                            25.26480489803017
                        ],
                        [
                            55.37522705620765,
                            25.269811337260503
                        ],
                        [
                            55.362646917380864,
                            25.277158815828734
                        ],
                        [
                            55.35844444699511,
                            25.27961967941011
                        ],
                        [
                            55.35786657886211,
                            25.279882504481716
                        ],
                        [
                            55.35727556423794,
                            25.280097560714914
                        ],
                        [
                            55.35656629480799,
                            25.28009767408819
                        ],
                        [
                            55.35590954616952,
                            25.28000223862264
                        ],
                        [
                            55.35527904626981,
                            25.27978737457266
                        ],
                        [
                            55.35475360621888,
                            25.27946501302111
                        ],
                        [
                            55.35104917717699,
                            25.27612169402097
                        ],
                        [
                            55.350641985050835,
                            25.275894840875754
                        ],
                        [
                            55.35014286695615,
                            25.275751592377663
                        ],
                        [
                            55.34964375641817,
                            25.27565611091917
                        ],
                        [
                            55.348947648446114,
                            25.27566812839159
                        ],
                        [
                            55.34838289503375,
                            25.275787608889697
                        ],
                        [
                            55.34785752880405,
                            25.275787661527875
                        ],
                        [
                            55.347345285757086,
                            25.275692173587924
                        ],
                        [
                            55.3471088603513,
                            25.27559665838145
                        ],
                        [
                            55.344337451172045,
                            25.274414614817896
                        ],
                        [
                            55.337284407519036,
                            25.27190711284664
                        ],
                        [
                            55.33602356072717,
                            25.271548875526744
                        ],
                        [
                            55.33488092489517,
                            25.271238394987922
                        ],
                        [
                            55.33050743025732,
                            25.27053378678687
                        ],
                        [
                            55.32894453940919,
                            25.27035461571732
                        ],
                        [
                            55.32715837551701,
                            25.270318725226883
                        ],
                        [
                            55.31887109030225,
                            25.270353972469934
                        ],
                        [
                            55.31824069071359,
                            25.27025837182564
                        ],
                        [
                            55.317728506282336,
                            25.270067243498072
                        ],
                        [
                            55.31733453139286,
                            25.2698283574795
                        ],
                        [
                            55.31692743418939,
                            25.269517815787886
                        ],
                        [
                            55.316651681693045,
                            25.269147576896334
                        ],
                        [
                            55.316362815733754,
                            25.268645971829777
                        ],
                        [
                            55.31624467544456,
                            25.268216039197146
                        ],
                        [
                            55.31595584566526,
                            25.26748753155519
                        ],
                        [
                            55.31569322356742,
                            25.267188945498983
                        ],
                        [
                            55.31535180708486,
                            25.2668664649932
                        ],
                        [
                            55.31495784538107,
                            25.26663951473287
                        ],
                        [
                            55.314498210196284,
                            25.266472266038605
                        ],
                        [
                            55.31200301132732,
                            25.265898701087018
                        ],
                        [
                            55.311517086959874,
                            25.26589863007627
                        ],
                        [
                            55.31074221691262,
                            25.265994051117843
                        ],
                        [
                            55.31012492255859,
                            25.26619697272881
                        ],
                        [
                            55.309599530302975,
                            25.26654321292447
                        ],
                        [
                            55.308128364839675,
                            25.26776107308231
                        ],
                        [
                            55.30795756750249,
                            25.26807154088959
                        ],
                        [
                            55.30768166980466,
                            25.268537238782173
                        ],
                        [
                            55.307602713462714,
                            25.269277641027102
                        ],
                        [
                            55.30740469926463,
                            25.27404253973623
                        ],
                        [
                            55.30733894547498,
                            25.27443662026481
                        ],
                        [
                            55.30719437415704,
                            25.274890397723006
                        ],
                        [
                            55.30702356959922,
                            25.275176979774518
                        ],
                        [
                            55.306892174362105,
                            25.27542774213439
                        ],
                        [
                            55.30656372975757,
                            25.27584565930856
                        ],
                        [
                            55.30603826714177,
                            25.276275481601218
                        ],
                        [
                            55.30551283622443,
                            25.276550053652247
                        ],
                        [
                            55.305053099187575,
                            25.27671715680013
                        ],
                        [
                            55.3045671092417,
                            25.276812600314553
                        ],
                        [
                            55.304199344123056,
                            25.276836412531924
                        ],
                        [
                            55.303660839162134,
                            25.276836305241712
                        ],
                        [
                            55.303122357861206,
                            25.276740658549038
                        ],
                        [
                            55.30272835711479,
                            25.276633097743403
                        ],
                        [
                            55.30229497866753,
                            25.276429990162494
                        ],
                        [
                            55.301795933743755,
                            25.27621492510535
                        ],
                        [
                            55.30056147611067,
                            25.275629489251916
                        ],
                        [
                            55.300325106875206,
                            25.275462246026237
                        ],
                        [
                            55.29999682242116,
                            25.275211386407797
                        ],
                        [
                            55.299813020592474,
                            25.274936674571588
                        ],
                        [
                            55.299524180418985,
                            25.27454251663676
                        ],
                        [
                            55.29923538549384,
                            25.273993109730394
                        ],
                        [
                            55.29852648545299,
                            25.272822610080354
                        ],
                        [
                            55.29822453094928,
                            25.272392619842442
                        ],
                        [
                            55.2978831773465,
                            25.27196261950599
                        ],
                        [
                            55.296714657750044,
                            25.27068452004417
                        ],
                        [
                            55.29613692475899,
                            25.270206687986136
                        ],
                        [
                            55.2955460221185,
                            25.26986021437023
                        ],
                        [
                            55.29481064703859,
                            25.26953758512519
                        ],
                        [
                            55.294206633278435,
                            25.26914333393259
                        ],
                        [
                            55.29231580351952,
                            25.267996370130575
                        ],
                        [
                            55.29168549816087,
                            25.267721523187745
                        ],
                        [
                            55.29075316827632,
                            25.267339106987123
                        ],
                        [
                            55.290096641483416,
                            25.26695676592189
                        ],
                        [
                            55.28958462209706,
                            25.266466985055906
                        ],
                        [
                            55.28920400686152,
                            25.265786166577044
                        ],
                        [
                            55.288823513435354,
                            25.264782907743605
                        ],
                        [
                            55.28853490806467,
                            25.263911039910603
                        ],
                        [
                            55.288469419245224,
                            25.26343333201475
                        ],
                        [
                            55.28845646641026,
                            25.262943697836597
                        ],
                        [
                            55.28858798232056,
                            25.26243022307544
                        ],
                        [
                            55.28885083241936,
                            25.261892903381543
                        ],
                        [
                            55.289494714252804,
                            25.260830239807444
                        ],
                        [
                            55.28971806133469,
                            25.260567577440064
                        ],
                        [
                            55.290085902875894,
                            25.26019747726527
                        ],
                        [
                            55.29021725714476,
                            25.260113920238645
                        ],
                        [
                            55.290571909009024,
                            25.259899063661965
                        ],
                        [
                            55.290965936166366,
                            25.25974392856399
                        ],
                        [
                            55.29145187690259,
                            25.259624645131424
                        ],
                        [
                            55.29180646831474,
                            25.25957697645692
                        ],
                        [
                            55.292161039316866,
                            25.25958901796084
                        ],
                        [
                            55.29378942721065,
                            25.25968500071053
                        ],
                        [
                            55.294183403652525,
                            25.259673163492057
                        ],
                        [
                            55.29466933719794,
                            25.259565811671543
                        ],
                        [
                            55.29519468200037,
                            25.259410699603688
                        ],
                        [
                            55.30444097937942,
                            25.254791162276106
                        ],
                        [
                            55.30677872426585,
                            25.253561552793744
                        ],
                        [
                            55.3076717745251,
                            25.253131790810915
                        ],
                        [
                            55.30886684216123,
                            25.252725958182307
                        ],
                        [
                            55.30960226927427,
                            25.2524514071338
                        ],
                        [
                            55.31019325436767,
                            25.252129060967068
                        ],
                        [
                            55.31095500589726,
                            25.251484298415217
                        ],
                        [
                            55.31312206185532,
                            25.24935889509375
                        ],
                        [
                            55.313778744087244,
                            25.248630507719337
                        ],
                        [
                            55.31429098507962,
                            25.247842387659865
                        ],
                        [
                            55.315197280818325,
                            25.246182531873476
                        ],
                        [
                            55.31551253734958,
                            25.245406325222532
                        ],
                        [
                            55.31623515062011,
                            25.24244473656186
                        ],
                        [
                            55.316537319505194,
                            25.24123860523471
                        ],
                        [
                            55.31661619199623,
                            25.240581791032927
                        ],
                        [
                            55.317155155244976,
                            25.235912433875896
                        ],
                        [
                            55.31682727621911,
                            25.233189564760746
                        ],
                        [
                            55.316958659950814,
                            25.232532755514303
                        ],
                        [
                            55.31719504779015,
                            25.23210286041362
                        ],
                        [
                            55.31754958634421,
                            25.231768515607914
                        ],
                        [
                            55.31799601817982,
                            25.231517775282462
                        ],
                        [
                            55.31861312279157,
                            25.231326761972465
                        ],
                        [
                            55.31999171502887,
                            25.2312552393413
                        ],
                        [
                            55.32063505901157,
                            25.231207527005886
                        ],
                        [
                            55.324849623412845,
                            25.230646543062647
                        ],
                        [
                            55.325217245471535,
                            25.230622679198657
                        ],
                        [
                            55.32550608777922,
                            25.23065852154789
                        ],
                        [
                            55.326018127059506,
                            25.230718259061394
                        ],
                        [
                            55.32693717066265,
                            25.230873551022366
                        ],
                        [
                            55.32743608451463,
                            25.230885514030444
                        ],
                        [
                            55.327856226231766,
                            25.23081387666625
                        ],
                        [
                            55.32822385220122,
                            25.230694467277026
                        ],
                        [
                            55.328617736964006,
                            25.23055117329933
                        ],
                        [
                            55.328998495760686,
                            25.230288455320114
                        ],
                        [
                            55.33084976035079,
                            25.228401621254363
                        ],
                        [
                            55.33277974312346,
                            25.226037073307538
                        ],
                        [
                            55.33644257271747,
                            25.221797536913066
                        ],
                        [
                            55.341181561688536,
                            25.216399453159877
                        ]
                    ]
                },
                "properties": {
                    "Segment": "Total",
                    "X": 507290.388635964,
                    "Y": 2794069.89791457,
                    "Length": 23053.6032385889,
                    "Units": "m",
                    "Area": "",
                    "Area_Units": "",
                    "Angle": "0",
                    "Bearing": ""
                }
            }
        ],
        "fileName": "Polyline"
    };
    var metroTramLineData = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "geometry": {
                    "bbox": [
                        55.131734756638814,
                        25.069439412360264,
                        55.16532719535202,
                        25.108270309442894
                    ],
                    "type": "LineString",
                    "coordinates": [
                        [
                            55.16532719535202,
                            25.108270309442894
                        ],
                        [
                            55.1605600671825,
                            25.103177360138062
                        ],
                        [
                            55.1599053313723,
                            25.102436165536368
                        ],
                        [
                            55.15919834459692,
                            25.101551597527138
                        ],
                        [
                            55.1582027286404,
                            25.10073834016355
                        ],
                        [
                            55.15757397744951,
                            25.1001882447038
                        ],
                        [
                            55.156526471875914,
                            25.098992756736042
                        ],
                        [
                            55.15498099670986,
                            25.09753392985997
                        ],
                        [
                            55.15157614503076,
                            25.09411426082164
                        ],
                        [
                            55.147359806286325,
                            25.089761987512944
                        ],
                        [
                            55.146888347932006,
                            25.089331467903545
                        ],
                        [
                            55.146810097710265,
                            25.089044750918315
                        ],
                        [
                            55.14702006771815,
                            25.08894947516693
                        ],
                        [
                            55.14906825975354,
                            25.087351745086583
                        ],
                        [
                            55.14964548552067,
                            25.087209151385217
                        ],
                        [
                            55.15014498667725,
                            25.086421567269003
                        ],
                        [
                            55.150486513464195,
                            25.0860398301019
                        ],
                        [
                            55.15059216838568,
                            25.085538377333783
                        ],
                        [
                            55.15056665036296,
                            25.085060647860274
                        ],
                        [
                            55.15056728881113,
                            25.084630720377973
                        ],
                        [
                            55.150436791536386,
                            25.084200631310058
                        ],
                        [
                            55.150332522213915,
                            25.083770574451595
                        ],
                        [
                            55.150097118821186,
                            25.083340355643397
                        ],
                        [
                            55.14983527655088,
                            25.08305341321096
                        ],
                        [
                            55.14886613428122,
                            25.082216239904632
                        ],
                        [
                            55.14800133595606,
                            25.081761349165504
                        ],
                        [
                            55.143836966484905,
                            25.078077813652133
                        ],
                        [
                            55.14035462234471,
                            25.074442818686837
                        ],
                        [
                            55.1382080291256,
                            25.072003749660816
                        ],
                        [
                            55.13682056866239,
                            25.07047328364986
                        ],
                        [
                            55.136270319167636,
                            25.070185935023467
                        ],
                        [
                            55.13569442311837,
                            25.069540276131924
                        ],
                        [
                            55.13551100860397,
                            25.069444492093062
                        ],
                        [
                            55.1352486151897,
                            25.06953968199014
                        ],
                        [
                            55.131782474737825,
                            25.072329553889443
                        ],
                        [
                            55.131729790952605,
                            25.07247279191281
                        ],
                        [
                            55.13180815209175,
                            25.07266397772126
                        ],
                        [
                            55.132043783563525,
                            25.07290314666966
                        ],
                        [
                            55.13212202837583,
                            25.073165986921868
                        ],
                        [
                            55.132200273518265,
                            25.073428827125603
                        ],
                        [
                            55.13225241112748,
                            25.073619977148223
                        ],
                        [
                            55.132251748056824,
                            25.074026019936667
                        ],
                        [
                            55.132434621230196,
                            25.07445619613126
                        ],
                        [
                            55.1326436818715,
                            25.074910292408987
                        ],
                        [
                            55.13295776158266,
                            25.075292875417727
                        ],
                        [
                            55.13332452663543,
                            25.075532219242778
                        ],
                        [
                            55.133848683736474,
                            25.075747888846124
                        ],
                        [
                            55.134923459829075,
                            25.0760359483738
                        ],
                        [
                            55.135421550059746,
                            25.07615603791448
                        ],
                        [
                            55.13581439469129,
                            25.07649095003604
                        ],
                        [
                            55.13612867958749,
                            25.076754102010007
                        ],
                        [
                            55.13636405978567,
                            25.07716045812604
                        ],
                        [
                            55.13646816022407,
                            25.077662179450208
                        ],
                        [
                            55.13662467500149,
                            25.078187855058086
                        ],
                        [
                            55.13717431397476,
                            25.078881244928173
                        ],
                        [
                            55.13751460595212,
                            25.079287737757042
                        ],
                        [
                            55.13782897746945,
                            25.079503116377953
                        ],
                        [
                            55.13906043672655,
                            25.080245165585076
                        ],
                        [
                            55.139479756330644,
                            25.0804367931347
                        ],
                        [
                            55.13961062482873,
                            25.08060415836654
                        ],
                        [
                            55.13989907724666,
                            25.0806284195025
                        ],
                        [
                            55.14008292427585,
                            25.080461464642777
                        ],
                        [
                            55.14347024693028,
                            25.077790725970452
                        ]
                    ]
                },
                "properties": {
                    "Segment": "Total",
                    "X": 483054.64232855,
                    "Y": 2778058.21328833,
                    "Length": 8106.48004488086,
                    "Units": "m",
                    "Area": "",
                    "Area_Units": "",
                    "Angle": "0",
                    "Bearing": ""
                }
            }
        ],
        "fileName": "Polyline"
    }
    if (!mapbox.getSource('metro-tram-line'))
        mapbox.addSource('metro-tram-line', {
            type: 'geojson',
            data: metroTramLineData
        });
    if (!mapbox.getSource('metro-tram-red-line'))
    mapbox.addSource('metro-tram-red-line', {
        type: 'geojson',
        data: metroTramRedLineData
    });
    if (!mapbox.getSource('metro-tram-green-line'))
    mapbox.addSource('metro-tram-green-line', {
        type: 'geojson',
        data: metroTramGreenLineData
    });
    mapbox.addLayer({
        id: 'metro-tram-line-layer',
        type: 'line',
        source: 'metro-tram-line',
        layout: {
            'line-join': 'round',
            'line-cap': 'round'
        },
        paint: {
            'line-color': '#FF7D00', // Orange line color
            'line-width': 4 // Line width
        }
    });
    mapbox.addLayer({
        id: 'metro-tram-green-line-layer',
        type: 'line',
        source: 'metro-tram-green-line',
        layout: {
            'line-join': 'round',
            'line-cap': 'round'
        },
        paint: {
            'line-color': '#00FF00', // Green line color
            'line-width': 4 // Line width
        }
    });

    mapbox.addLayer({
        id: 'metro-tram-red-line-layer',
        type: 'line',
        source: 'metro-tram-red-line',
        layout: {
            'line-join': 'round',
            'line-cap': 'round'
        },
        paint: {
            'line-color': '#ff0000', // Red line color
            'line-width': 4 // Line width
        }
    });
}
const RemoveTramGreenAndRedLine = async () => {
    // Remove layers if they exist
    if (mapbox.getLayer('metro-tram-green-line-layer')) {
        mapbox.removeLayer('metro-tram-green-line-layer');
    }
    if (mapbox.getLayer('metro-tram-red-line-layer')) {
        mapbox.removeLayer('metro-tram-red-line-layer');
    }
    if (mapbox.getLayer('metro-tram-line-layer')) {
        mapbox.removeLayer('metro-tram-line-layer');
    }

}

const RemoveMetrosLayer = () => {
    mapbox.off('click', 'unclustered-metro-point');
    // Remove layers if they exist
    if (mapbox.getLayer('unclustered-metro-point')) {
        mapbox.removeLayer('unclustered-metro-point');
    }

    // Remove existing click event listeners before adding new ones
    // Remove source if it exists
    //if (mapbox.getSource('metro')) {
    //    mapbox.removeSource('metro');
}

export const AddMetrosLayer = async (IsAdding) => {
    try {
        if (!IsAdding) { await RemoveMetrosLayer(); await RemoveTramGreenAndRedLine(); return; }

        var metrosData = [];
        if (!mapbox.getSource('metros')) {
            var metrosList = await ApiServices.GetMetroStationAndTramAndTrainDepots();
            for (var i = 0; i < metrosList.length; i++) {
                metrosData.push({
                    type: 'Feature',
                    geometry: {
                        type: 'Point',
                        coordinates: [metrosList[i].location.split(',')[1].trim(), metrosList[i].location.split(',')[0]]
                    },
                    properties: {
                        "description": metrosList[i].name,
                        "id": metrosList[i].id,
                        "name": metrosList[i].name,
                        "color": metrosList[i].color
                    }
                });
            }

        }
        await LoadMetrosLayer({
            'type': 'FeatureCollection',
            'features': metrosData
        })
    } catch (err) {
        console.error(err);
    }

}